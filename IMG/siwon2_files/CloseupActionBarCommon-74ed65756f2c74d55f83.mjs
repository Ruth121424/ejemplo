(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["CloseupActionBarCommon"],{"3vRR":function(e,t,n){var i=n("q1tI"),o=n.n(i),a=n("n6mq");t.a=({children:e})=>o.a.createElement(a.d,{width:"100%",role:"list"},e)},"6wCo":function(e,t,n){var i=n("q1tI"),o=n.n(i),a=n("JW66"),r=n("ENn1"),s=n("ynlw"),l=n("Hrat"),c=n("/MKj"),d=n("E/VT"),m=n("Ye/N"),u=n("7w6Q"),p=n("tkfL");const h=()=>u.a.increment("windows.download.blob.error"),f=(e,t,n)=>{const i=new window.Windows.Storage.Pickers.FileSavePicker;i.suggestedStartLocation=window.Windows.Storage.Pickers.PickerLocationId.picturesLibrary;const{extension:o,extensionName:a,name:r}=(e=>{const t=e.split("/"),n=t[t.length-1],i=n.split(".");if(i.length>1){const e=i.pop();return{extension:`.${e}`,extensionName:e.toUpperCase(),name:i.join()}}return{extension:".",extensionName:m.a._("Unknown","Label for file picker drop down when the file type is not known","Label for file picker drop down when the file type is not known"),name:n}})(t);i.suggestedFileName=n||r,i.fileTypeChoices.insert(a,[o]),i.pickSaveFileAsync().then(t=>{t&&(window.Windows.Storage.CachedFileManager.deferUpdates(t),t.openAsync(window.Windows.Storage.FileAccessMode.readWrite).then(t=>{const n=e.msDetachStream();window.Windows.Storage.Streams.RandomAccessStream.copyAsync(n,t).then(()=>{t.flushAsync().done(()=>{n.close(),t.close(),u.a.increment("windows.download.blob.success")},h)},h)},h))})};var g=({filename:e,imgSrc:t,category:n})=>{if(!t)return null;return o.a.createElement(p.b,{onClick:()=>{((e,t)=>{try{const n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="blob",n.onreadystatechange=()=>{if(4===n.readyState)if(200!==n.status)u.a.increment("windows.download.blob.nodownload",.1,{status:n.status});else{const i=n.response;f(i,e,t)}},n.send(null)}catch(n){u.a.increment("windows.download.blob.xhrexception",.1,{error:n})}})(t,e)},text:m.a._("Download image","Button to download Pin image","Button to download Pin image")})},b=n("lUXN"),y=n("TiQD"),w=n("kmwA"),E=n("n6mq");function _(e){const{onDismiss:t,myPin:n}=e,[a,r]=Object(i.useState)(1),s=[{label:m.a._("Small","pinActionDropdown.GetEmbedCodeModal.small","Label on segmented controller for pin embed code, for small width"),width:236},{label:m.a._("Medium","pinActionDropdown.GetEmbedCodeModal.medium","Label on segmented controller for pin embed code, for medium width"),width:345},{label:m.a._("Large","pinActionDropdown.GetEmbedCodeModal.large","Label on segmented controller for pin embed code, for large width"),width:450},{label:m.a._("Extra Large","pinActionDropdown.GetEmbedCodeModal.extra_large","Label on segmented controller for pin embed code, for extra-large width"),width:600}];return o.a.createElement(E.v,null,o.a.createElement(y.b,{accessibilityModalLabel:m.a._("Get Embed Code","pinActionDropdown.GetEmbedCodeModal.modalLabel","Accessibility label on modal for pin embed code"),heading:m.a._("Get Embed Code","pinActionDropdown.GetEmbedCodeModal.header","Heading on modal for pin embed code"),onDismiss:t,footer:o.a.createElement(E.d,{display:"flex",direction:"row",justifyContent:"end"},o.a.createElement(E.e,{size:"sm",text:m.a._("Got it!","pinActionDropdown.GetEmbedCodeModal.dismissButton","Button to dismiss embed code modal"),onClick:t}))},o.a.createElement(E.d,{paddingX:6,paddingY:4},o.a.createElement(E.J,{items:s.map(e=>e.label),selectedItemIndex:a,onChange:({activeIndex:e})=>{r(e)}})),o.a.createElement(E.d,{paddingX:8,paddingY:6},o.a.createElement("code",null,`<iframe src="${w.a.settings.ASSETS_SITE_URL}/ext/embed.html?id=${n.id}" height="${Math.ceil(n.height*s[a].width/n.width+100)}" width="${s[a].width}" frameborder="0" scrolling="no" ></iframe>`))))}var v=n("vepm"),S=n("hFNL"),x=n("LT60"),C=n("CvCA"),R=n("v/Q4"),T=n("CONZ"),O=n("eUcp"),I=n("U4JR"),j=n("nGHF"),k=n("pLLR"),B=n("ANjH"),P=n("+PUW");var D=Object(B.compose)(Object(c.connect)(P.d,e=>({deletePinMention:t=>e(Object(T.b)(t)),openLoginModal:()=>e(P.b)})),k.e)((function({bestPinImgSrc:e,bgColor:t,deletePinMention:n,embedImg:a,hideDownload:r,showEmbed:s,iconColor:l,iconSize:c,isFullAuth:u,onToggle:h,openLoginModal:f,pinCategory:y,pinDescription:w,pinId:T,pinImgSrc:k,pinTitle:B,reportPin:P,requestContext:D,showRemoveMention:L,usePortal:A}){const{showOneToast:M}=Object(j.b)(),[H,F]=Object(i.useState)(!1),[z,U]=Object(i.useState)(!1),N=Object(R.a)(),Y=Object(i.useRef)(),q=()=>{F(!1)},X=()=>{n(T),N.isAuth&&Object(I.a)(8909,{element:116,tag_id:N.id,tag_type:1,view:3}),q(),M(({onHide:e})=>o.a.createElement(C.a,{onHide:e,text:m.a._("@mention removed!","closeup.pinActionDropDown.mentionRemovalToast","Toast that tells user that they have successfully removed the @mention of them in another user's Pin description")}))},$=()=>{z||Object(I.a)(4439,{view:3,viewParameter:156}),F(!1),U(!z)},G=m.a._("More options","Accessible label for more options dropdown","Accessible label for more options dropdown");return o.a.createElement(E.d,{flex:"grow",alignItems:"center",display:"flex"},o.a.createElement(E.d,{ref:Y},o.a.createElement(v.a,{accessibilityLabel:G,icon:"ellipsis",onClick:()=>{h&&h(),F(!H),(e=>{Object(I.a)(101,{element:e,component:4,view:3,viewParameter:139})})(981)}})),H&&(()=>{const t=o.a.createElement(E.d,{zIndex:O.a},o.a.createElement(E.o,{anchor:Y.current,idealDirection:"down",onDismiss:q,size:"xs"},o.a.createElement(p.a,null,!r&&"undefined"!=typeof window&&"windows"!==Object(S.b)(window)&&e&&o.a.createElement(d.a,{imgSrc:e||"",filename:B||w,category:y,pinId:T},e=>o.a.createElement(p.b,{onClick:e,text:m.a._("Download image","Button to download Pin image","Button to download Pin image")})),!r&&"undefined"!=typeof window&&"windows"===Object(S.b)(window)&&(e||k)&&o.a.createElement(g,{imgSrc:e||k||"",filename:B||w,category:y}),o.a.createElement(p.b,{onClick:u?P:f,text:m.a._("Report Pin","Label for report pin action","Label for report pin action")}),L&&o.a.createElement(p.b,{onClick:X,text:m.a._("Remove @mention","closeup.pinActionDropDown.removeMention","Button that allows user to remove their @mention in the pin's")}),s&&o.a.createElement(b.a,{name:"closeup_pin_embed_code"},({anyEnabled:e})=>e&&o.a.createElement(p.b,{onClick:$,text:m.a._("Get Pin embed code","Label for embed pin action","Label for embed pin action")})))));return A?o.a.createElement(x.a,null,o.a.createElement(E.v,null,t)):t})(),z&&o.a.createElement(_,{myPin:{id:T,height:a.height,width:a.width},onDismiss:$}))})),L=n("YxyV"),A=n("7jH2");t.a=e=>{var t;const n=Object(R.a)(),{pin:i,viewParameter:c}=e,{pinTitle:d,pinDescription:m,pinCategory:u}=Object(l.a)(i),p=Object(A.p)({pin:i}),{video:h}=Object(A.x)(p)||{},f=!!h;let g;i.images&&(g=i.embed&&"gif"===i.embed.type?i.embed.src:i.images["736x"]&&i.images["736x"].url);const b=!!i.story_pin_data_id,y=Object(L.d)(i),{isPromoted:w}=Object(s.a)(i),_=i.board.privacy===a.a.BoardPrivacy.SECRET,v=!w&&!_,S=n.isAuth&&(null===(t=i.user_mention_tags)||void 0===t?void 0:t.filter(e=>e.object_id===n.id).length)>0;return o.a.createElement(E.d,{"data-test-id":"pin-action-bar"},o.a.createElement(D,{embedImg:Object(L.e)(i,"736x"),showEmbed:v,bestPinImgSrc:y,bgColor:"transparent",hideDownload:f||b,iconColor:"gray",iconSize:"md",pinCategory:u,pinDescription:m,pinId:i.id,pinImgSrc:g,pinTitle:d,reportPin:Object(r.a)({pin:i,viewParameter:c,viewType:3}),showRemoveMention:S,usePortal:!1}))}},Hrat:function(e,t,n){var i=n("xdpg"),o=n("Ye/N");t.a=e=>{const t=e.link_domain||{},n=e.tracked_link||e.link||e.images&&e.images.orig&&e.images.orig.url,a=e.rich_metadata,r=e.domain,s=e.closeup_attribution||e.native_creator||t.official_user||e.pinner||e.origin_pinner,l=!(!(a&&a.recipe&&a.recipe.name&&a.recipe.categorized_ingredients)||a.recipe.from_aggregated_data);let c,d;a&&a.products&&a.products[0]&&(c=!!(a&&a.name&&a.offer_summary));const m=e.buyable_product,u=c||m,p=!(!a||!a.article),h=!(!a||!a.tutorial),f=!(!s||!s.username);let g=o.a._("Saved from ","Closeup pin annotation","Closeup pin annotation"),b=f?o.a._("Saved by"):o.a._("Saved from"),y=o.a._("Visit");a&&a.products&&a.products[0]&&a&&a.products[0].name&&a.products[0].offer_summary&&(g=o.a._("Product sold by ","pin annotation","pin annotation"),d=a.products[0].offer_summary),u?(b=o.a._("Sold by"),y=o.a._("Visit")):h?(g=o.a._("Saved from ","pin annotation","pin annotation"),b=f?o.a._("Saved by"):o.a._("Saved from"),y=o.a._("Visit")):l?(g=o.a._("Recipe from ","pin annotation","pin annotation"),b=f?o.a._("Recipe by"):o.a._("Recipe from"),y=o.a._("Make it")):p&&(g=o.a._("Article from ","pin annotation","pin annotation"),b=f?o.a._("Article by"):o.a._("Article from"),y=o.a._("Read it"));const w=e.rich_summary;if(!d&&w){let e;w&&w.products&&w.products[0]&&(e=!!(w&&w.products[0].name&&w.products[0].offer_summary))&&(g=o.a._("Product sold by ","pin annotation","pin annotation"))}let E,_;return f?(E="/"+s.username+"/",_=s.full_name):(E="/source/"+r,_=a&&a.site_name||r),{actionButtonText:y,image:s&&(s.image_medium_url||s.image_small_url)||e.board&&e.board.image_thumbnail_url,link:E,pinLink:n,pin:e,pinCreditPrefix:g,prefixText:b,subtitle:_,title:i.c(o.a._("More from {{ subtitle }}"),{subtitle:_}),pinTitle:e.closeup_unified_title,pinDescription:e.closeup_unified_description,pinCategory:e.category}}},OPV1:function(e,t,n){var i=n("q1tI"),o=n.n(i),a=n("Ye/N"),r=n("vepm"),s=n("4cpq"),l=n("dtqy");t.a=Object(l.a)(({handlePinEditButtonClick:e})=>o.a.createElement(s.a,{id:"closeup-pin-edit-button"},o.a.createElement(r.a,{accessibilityLabel:a.a._("Edit","edit button on pin","edit button on pin"),onClick:t=>e&&e(t),icon:"edit"})))},Pus6:function(e,t,n){var i=n("q1tI"),o=n.n(i),a=n("R6wO"),r=n("3gA6"),s=n("n6mq");t.a=({bold:e,description:t,descriptionColor:n,external:i,hasDividerAfter:l,icon:c,onClick:d,text:m,url:u})=>{const p=o.a.createElement(s.d,{role:"listitem",overflow:"hidden"},o.a.createElement(a.a,{bold:e,description:t,descriptionColor:n,icon:c,text:m}));return o.a.createElement(s.d,null,u?o.a.createElement(r.b,{to:u,external:i,onClick:d},p):o.a.createElement(s.R,{fullWidth:!1,onTap:d},p),l&&o.a.createElement(s.m,null))}},qlIy:function(e,t,n){n.r(t),n.d(t,"CloseupActionBar",(function(){return q}));var i=n("q1tI"),o=n.n(i),a=n("OPV1"),r=n("6wCo"),s=n("c4Fo"),l=n("n6mq");const c=136;class d extends o.a.Component{constructor(...e){var t,n,i;super(...e),i={paused:!1,showPulsar:!1},(n="state")in(t=this)?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i}componentDidMount(){this.mountPulsar(),this.props.onExperienceMount&&this.experience&&this.props.onExperienceMount(this.experience)}componentWillUnmount(){clearTimeout(this.timer)}mountPulsar(){if(!this.experience)return;const{display_data:e}=this.experience;e.has_pulsar&&this.setState({showPulsar:!0})}renderPulsar(){const{anchor:e}=this.props,{paused:t}=this.state;if(!e)return null;const n=e.getBoundingClientRect(),{height:i,width:a}=n,r=-(c/2+i/2),s=-(c/2-a/2);return o.a.createElement(l.d,{position:"absolute",dangerouslySetInlineStyle:{__style:{zIndex:1,marginTop:r,marginLeft:s,cursor:"pointer",pointerEvents:"none"}}},o.a.createElement(l.E,{paused:t}))}renderFlyout(e){const{anchor:t,flyoutSize:n,idealDirection:i,textOverflow:a}=this.props;return o.a.createElement(l.o,{anchor:t,color:"blue",idealDirection:i||"down",onDismiss:()=>{},shouldFocus:!1,showCaret:!0,size:n},o.a.createElement(l.d,{column:12,padding:3},o.a.createElement(l.S,{color:"white",overflow:a,weight:"bold"},e)))}render(){const{experienceIds:e,placementId:t,shouldTimeoutDismiss:n}=this.props,{showPulsar:i}=this.state;return o.a.createElement(s.a,{experienceIds:e,placementId:t,type:8},e=>{const{complete:t,dismiss:a,display_data:r}=e;return this.experience=e,r.has_pulsar||r.has_tooltip?(n&&r.disappearTime&&r.disappearTime>0&&(this.timer=setTimeout(()=>(a(),null),r.disappearTime)),o.a.createElement(l.d,{dangerouslySetInlineStyle:{__style:{zIndex:10}}},i&&this.renderPulsar(),r.has_tooltip&&(!r.has_pulsar||this.state.paused)&&this.renderFlyout(r.text))):(t(),null)})}}var m=n("/MKj"),u=n("1Vso");const p=20,h={loaded:{opacity:1,transitionDuration:"0.20s",transitionTimingFunction:"cubic-bezier(0, 0, 0.58, 1)",transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"},fade:{opacity:.1,transitionDuration:"0.30s",transitionTimingFunction:"cubic-bezier(0, 0, 0.58, 1)",transitionProperty:"transform, opacity",transform:"translate(0, 5px)",transformOrigin:"center"}};function f({reactionLabel:e,handleHideConfirmation:t}){const[n,a]=Object(i.useState)("loaded"),r=Object(i.useRef)();return Object(i.useEffect)(()=>{let e=null,n=null;return r.current=requestAnimationFrame(()=>{e=setTimeout(()=>a("fade"),1e3),n=setTimeout(()=>t(),1300)}),function(){clearTimeout(e),clearTimeout(n)}},[]),o.a.createElement(l.d,{position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(l.d,{rounding:"pill",position:"absolute",color:"darkGray",ref:r,height:p,display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2,dangerouslySetInlineStyle:{__style:{...h[n],whiteSpace:"nowrap"}}},o.a.createElement(l.S,{color:"white",size:"sm",weight:"bold",overflow:"normal"},e)))}var g=n("KNE1"),b=n("eo+c");const y=300,w=80,E=-y/2,_=20,v=40,S=24,x=-8,C=9,R={icon:{backgroundRepeat:"no-repeat",backgroundSize:"cover"},loading:{opacity:0,transitionDuration:"0.25s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1) translateZ(0) translateY(25px)",transformOrigin:"bottom"},loaded:{opacity:1,transitionDuration:"0.2s",transitionTimingFunction:"ease-out",transitionProperty:"transform, opacity",transform:"scaleX(1) scaleY(1)",transformOrigin:"bottom"},clicked:{transition:"transform 0.2s ease-out",transform:`translateY(-30px) scaleX(${64/v}) scaleY(${64/v})`,transformOrigin:"bottom",position:"relative",zIndex:1},flying:{transition:"transform 0.2s ease-out",transformOrigin:"bottom"},label:{transition:"transform 0.2s ease-out",transform:`scale(${v/64})`,transformOrigin:"bottom",whiteSpace:"nowrap"},fading:{opacity:0,transition:"opacity 0.2s ease-out"}},T={boxShadow:"0 9px 26px rgba(0, 0, 0, 0.4)"};function O({reactionButtonRect:e,handleReactionTrayClick:t}){const[n,a]=Object(i.useState)("loading"),[r,s]=Object(i.useState)(""),[c,d]=Object(i.useState)(),[m,u]=Object(i.useState)(!1),[p,h]=Object(i.useState)({}),[f]=Object(i.useState)(e),O=Object(i.useRef)(),I=Object(i.useRef)({});Object(i.useEffect)(()=>{"loading"===n&&(O.current=requestAnimationFrame(()=>a("loaded"))),(()=>{u(!0);const e={...p};b.c.forEach(t=>{I.current[t]&&!e[t]&&(e[t]=I.current[t].getBoundingClientRect())}),Object.keys(e).length===b.c.length&&h(e)})(),!c&&m&&(()=>{const e={...c};b.c.forEach(t=>{const n=p[t],{left:i,top:o}=f,{left:a,top:r}=n,s=i-a+x,l=o-r+C;e[t]={translateX:s,translateY:l}}),d(e)})()},[m,e]);const j=()=>{"clicked"===n&&r&&(a("flying"),setTimeout(()=>{t(r)},750))},k=b.c.map((e,t)=>{const{staticAsset:i,animatedAsset:a,label:s,htmlStyle:d,animationStyle:m}=Object(b.a)(e),u={transitionDelay:`${.08*t}s`,...R[n]},p={...r===e?R.clicked:R.loaded},h={...c&&r===e?{transform:`translateZ(0) translateX(${c[e].translateX}px) translateY(${c[e].translateY}px) scaleX(${S/v}) scaleY(${S/v}) `,...R[n]}:R.fading};let f={};return"loading"===n||"loaded"===n?f={...u}:"clicked"===n?f={...p}:"flying"===n&&(f={...h}),o.a.createElement(l.d,{display:"flex",alignSelf:"center",justifyContent:"between",key:t},o.a.createElement(l.d,{maxHeight:v,maxWidth:v,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",dangerouslySetInlineStyle:{__style:{...f}},ref:t=>{I.current[e]=t}},r!==e&&o.a.createElement(l.d,{position:"absolute",top:!0,left:!0,bottom:!0,right:!0},o.a.createElement(l.d,{width:v,height:v,dangerouslySetInlineStyle:{__style:{backgroundImage:`url(${i})`,backgroundPosiiton:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover"}}})),o.a.createElement(l.d,{display:"flex",alignItems:"center",justifyContent:"center",direction:"column",position:"relative"},o.a.createElement(g.a,{unsafeCSS:d}),r===e&&"clicked"===n&&o.a.createElement(l.d,{rounding:"pill",color:"darkGray",height:_,dangerouslySetInlineStyle:{__style:R.label},display:"flex",alignItems:"center",justifyContent:"center",paddingY:1,paddingX:2},o.a.createElement(l.S,{color:"white",size:"sm",weight:"bold",overflow:"normal"},s)),o.a.createElement("div",{onClick:j,onKeyDown:j,role:"presentation"},o.a.createElement(l.d,{width:v,height:v,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{...R.icon,...r===e&&"clicked"===n?{animation:m}:{},backgroundImage:`url(${a})`}}})))))});return o.a.createElement(l.d,{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{marginLeft:E}}},o.a.createElement(l.d,{display:"flex",alignItems:"center",justifyContent:"center",width:y,height:w,rounding:"pill",color:"flying"===n?"transparent":"white",dangerouslySetInlineStyle:{__style:{..."flying"!==n?T:{}}},onMouseMove:e=>{const{clientX:t}=e;if("flying"!==n){const e=(e=>{let t;return m&&b.c.forEach(n=>{const i=p[n];if(i&&i.left&&i.right){const{left:o,right:a}=i;e>=o&&e<=a&&(t=n)}}),t||null})(t);e!==r&&s(e),a("clicked")}}},o.a.createElement(l.d,{display:"flex",alignItems:"center",justifyContent:"around",width:"100%",paddingX:5},k)))}var I=n("eOdZ");var j=n("U4JR");function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const B=24,P=44,D={base:{borderRadius:"50%"},hovered:{backgroundColor:"rgb(226, 226, 226)"},active:{backgroundColor:"rgb(218, 218, 218)"},focused:{boxShadow:"0 0 0 4px rgba(0, 132, 255, 0.5)",outline:0}},L=500,A=300;var M=Object(m.connect)(null,e=>({pinUpdateReactionCount:(t,n,i)=>e(function(e,t,n){return{type:"PIN_UPDATE_REACTION_COUNT",payload:{id:e,increment:t,reactionType:n}}}(t,n,i))}))(class extends i.PureComponent{constructor(...e){super(...e),k(this,"state",{clickedReaction:0,isConfirmationShowing:!1,isReactionTrayShowing:!1,reactionButtonRect:null,useInitialReaction:!0,isHoveringOverTray:!1,isHoveringOverButton:!1}),k(this,"reactionButtonRef",o.a.createRef()),k(this,"trayOpenTimer",null),k(this,"trayCloseTimer",null),k(this,"onResize",()=>{this.setReactionButtonRect(),this.startTrayCloseTimer()}),k(this,"onScroll",()=>{this.setReactionButtonRect(),this.startTrayCloseTimer()}),k(this,"handleExperienceMount",e=>{e&&e.complete&&(501977===e.experience_id||501995===e.experience_id)&&(this.tooltipExperience=e)}),k(this,"handleReact",(e=7)=>{const{pinId:t,pinUpdateReactionCount:n}=this.props,i={pin_id:t,reaction_type:e};this.setState({clickedReaction:e,useInitialReaction:!1}),n(t,!0,e),I.a.create("ReactionsResource",i).callUpdate()}),k(this,"handleUnreact",()=>{const{pinId:e}=this.props,t={pin_id:e};this.setState({clickedReaction:0,useInitialReaction:!1}),I.a.create("ReactionsResource",t).callDelete()}),k(this,"setReactionButtonRect",()=>{if(this.reactionButtonRef.current&&this.reactionButtonRef.current instanceof HTMLElement){const e=this.reactionButtonRef.current.getBoundingClientRect();this.setState({reactionButtonRect:e})}}),k(this,"closeTray",()=>{this.setState({isReactionTrayShowing:!1})}),k(this,"startTrayCloseTimer",()=>{clearTimeout(this.trayCloseTimer),this.trayCloseTimer=setTimeout(()=>{const{isHoveringOverTray:e,isHoveringOverButton:t}=this.state;e||t||this.closeTray()},A)}),k(this,"handleOnHoverButton",()=>{this.setState({isHoveringOverButton:!0}),clearTimeout(this.trayOpenTimer),this.trayOpenTimer=setTimeout(()=>{const{isReactionTrayShowing:e,isHoveringOverButton:t}=this.state;!e&&t&&this.setState({isReactionTrayShowing:!0})},L),this.tooltipExperience&&this.tooltipExperience.complete()}),k(this,"handleOffHoverButton",()=>{this.setState({isHoveringOverButton:!1}),this.startTrayCloseTimer()}),k(this,"handleOnHoverTray",()=>{this.setState({isHoveringOverTray:!0})}),k(this,"handleOffHoverTray",()=>{this.setState({isHoveringOverTray:!1}),this.startTrayCloseTimer()}),k(this,"handleClickButton",()=>{const{clickedReaction:e,useInitialReaction:t}=this.state,{pinId:n,pinUpdateReactionCount:i,reactionByMe:o}=this.props,a=t?o:e;a?(i(n,!1,a),this.handleUnreact()):this.setReaction("love"),clearTimeout(this.trayOpenTimer),this.closeTray(),Object(j.a)(101,{view:3,viewParameter:139,element:11354,objectId:n})}),k(this,"setReaction",e=>{this.handleReact(Object(b.a)(e).type),this.handleShowConfirmation()}),k(this,"handleShowConfirmation",()=>{this.setState({isConfirmationShowing:!0})}),k(this,"handleHideConfirmation",()=>{this.setState({isConfirmationShowing:!1},this.startTrayCloseTimer)})}componentDidMount(){this.setReactionButtonRect(),window.addEventListener("mouseover",this.setReactionButtonRect)}componentWillUnmount(){clearTimeout(this.trayOpenTimer),clearTimeout(this.trayCloseTimer),window.removeEventListener("mouseover",this.setReactionButtonRect)}render(){const{isReactionTrayShowing:e,reactionButtonRect:t,isConfirmationShowing:n,clickedReaction:i,useInitialReaction:a,isHoveringOverTray:r}=this.state,{reactionByMe:s,showTooltip:c}=this.props,m=a?s:i,p=m?b.b[m]:"default",{staticAsset:h,label:g}=Object(b.a)(p);return o.a.createElement(l.d,{position:"relative"},o.a.createElement(u.a,{accessibilityLabel:"reaction",onClick:this.handleClickButton,onMouseEnter:this.handleOnHoverButton,onMouseLeave:this.handleOffHoverButton,style:{display:"block",border:"none",padding:0,cursor:"pointer",background:"transparent",outline:"none",borderRadius:"50%"}},({active:e,hovered:t,focused:n})=>{let i={...D.base};return e?i={...D.base,...D.active}:t||r?i={...D.base,...D.hovered}:n&&(i={...D.base,...D.focused}),o.a.createElement(l.d,{color:"transparent",rounding:"circle",dangerouslySetInlineStyle:{__style:i}},o.a.createElement(l.d,{display:"flex",justifyContent:"center",alignItems:"center",dangerouslySetInlineStyle:{__style:{minHeight:P,minWidth:P}}},o.a.createElement(l.d,{height:B,width:B,ref:this.reactionButtonRef,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosiiton:"center",backgroundImage:`url(${h})`}}})))}),c&&!e&&!n&&a&&o.a.createElement(d,{experienceIds:[501977,501995],idealDirection:"down",placementId:12,anchor:this.reactionButtonRef.current,flyoutSize:"lg",onExperienceMount:this.handleExperienceMount}),e&&!!t&&!!t.left&&!!t.top&&o.a.createElement(l.d,{display:"flex",justifyContent:"center",alignItems:"center"},o.a.createElement(l.N,{top:0},o.a.createElement(l.R,{onMouseEnter:this.handleOnHoverTray,onMouseLeave:this.handleOffHoverTray},o.a.createElement(O,{reactionButtonRect:t,handleReactionTrayClick:this.setReaction})))),n&&!!m&&g&&o.a.createElement(f,{reactionLabel:g,handleHideConfirmation:this.handleHideConfirmation}))}}),H=n("rYoy"),F=n("zXAL"),z=n("T5j3"),U=n("/zJj");function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Y=Object(i.lazy)(()=>n.e("SecondarySendButtonCommon").then(n.bind(null,"fepT")));class q extends o.a.Component{constructor(e){super(e),N(this,"sendExperienceComplete",()=>{}),N(this,"handleExternalSend",()=>{this.sendExperienceComplete()}),N(this,"onSendExperienceMount",e=>{e&&e.complete&&500946===e.experience_id&&(this.sendExperienceComplete=e.complete)}),N(this,"promoteButtonRef",Object(i.createRef)()),this.sendButtonTooltipRef=o.a.createRef()}render(){const{editable:e,gridDescription:t,hidePromoteButton:n,imageSrc:i,isFlyoutOpen:s,isOnSecretBoard:c,isPdp:m,onEditSubmit:u,onFlyoutDismiss:p,onToggleFlyout:h,pin:f,promoteButton:g,saveButton:b,shareButtonRef:y,viewParameter:w}=this.props,E=c?null:o.a.createElement(H.a,null,o.a.createElement(l.d,null,o.a.createElement(l.d,{ref:this.sendButtonTooltipRef},o.a.createElement(Y,{buttonType:"icon",gridDescription:t,imageSrc:i,isFlyoutOpen:s,onExternalSend:this.handleExternalSend,onFlyoutDismiss:p,onToggleFlyout:h,pinId:f.id,sendType:"pin",shareButtonRef:y})),b&&!s&&o.a.createElement(d,{experienceIds:[500946],placementId:12,anchor:this.sendButtonTooltipRef.current,onExperienceMount:this.onSendExperienceMount}))),_=Object(z.c)(f),v=o.a.createElement(l.d,{display:"flex",color:"white",justifyContent:"between",rounding:2,"data-test-id":"closeup-action-items",maxWidth:m?U.f:U.d},o.a.createElement(l.d,{display:"flex"},e&&o.a.createElement(l.d,{marginEnd:1},o.a.createElement(a.a,{carouselSlotCurrentIndex:f&&f.carousel_data&&f.carousel_data.index,pinId:f.id,onSubmit:u,view:3,viewParameter:w})),o.a.createElement(r.a,{pin:f,viewParameter:w})),o.a.createElement(l.d,{alignItems:"center",display:"flex"},E,_&&o.a.createElement(H.a,null,o.a.createElement(M,{pinId:f.id,reactionByMe:f.reaction_by_me,showTooltip:!0})),!n&&g&&o.a.createElement(H.a,null,o.a.createElement(o.a.Fragment,null,o.a.createElement(l.d,{ref:this.promoteButtonRef},g),o.a.createElement(d,{experienceIds:[501121],idealDirection:"down",placementId:12,anchor:this.promoteButtonRef.current,flyoutSize:"lg"})))));return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.d,{display:"flex",justifyContent:"between"},v,o.a.createElement(l.d,{marginStart:3},b)))}}t.default=Object(F.a)(q)},tkfL:function(e,t,n){var i=n("3vRR");n.d(t,"a",(function(){return i.a}));var o=n("Pus6");n.d(t,"b",(function(){return o.a}))}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/CloseupActionBarCommon-74ed65756f2c74d55f83.mjs.map